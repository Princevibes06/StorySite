{% extends "base.html" %}
{% block title %}Dashboard - StoryCraft{% endblock %}
{% block content %}
<div class="dashboard-header">
    <div>
        <h2>Your Dashboard</h2>
        <p class="muted">Logged in as: {{ g.user['email'] }}</p>
    </div>
    <a class="btn btn-primary" href="{{ url_for('new_story') }}">New Story</a>
</div>

<div class="grid-cards">
    {% if stories %}
        {% for story in stories %}
        <article class="card story-card">
            <div>
                <h3 class="story-title">{{ story['title'] }}</h3>
                <p class="story-preview">{{ story['content'] }}</p>
            </div>
            <div class="card-actions">
                <small class="muted">{{ story['word_count'] }} words</small>
                <div class="actions">
                    <a class="btn small" href="{{ url_for('edit_story', story_id=story['id']) }}">Edit</a>
                    <!-- server-side confirmation page (no JS) -->
                    <a class="btn danger small" href="{{ url_for('confirm_delete', story_id=story['id']) }}">Delete</a>
                </div>
            </div>
        </article>
        {% endfor %}
    {% else %}
        <p class="muted">No stories yet. <a href="{{ url_for('new_story') }}">Start a new one</a>.</p>
    {% endif %}
</div>
{% endblock %}
